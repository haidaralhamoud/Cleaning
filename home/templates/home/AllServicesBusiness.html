{% load static %}
{% load bootstrap4 %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>All Services - Business</title>
   <link rel="stylesheet" href="{% static 'css/base.css' %}">
<link rel="stylesheet" href="{% static 'css/main_header.css' %}">
  <link rel="stylesheet" href="{% static 'css/AllServicesBusiness.css'%}" />
</head>
<body>
<!-- ✅ HEADER -->
{% include "home/includes/main_header.html" %}

  <main class="container">
    <div class="header-row">
      <div>
        <h1 class="page-title">All Services</h1>
        <div class="page-subtitle">Premium business cleaning packages tailored to your space.</div>
      </div>

      <!-- filter button -->
      <div class="filter-wrapper">
        <button id="filter-btn">
          <img src="{% static 'images/filter0.png'%}" alt="Filter" />
        </button>
      </div>
    </div>

    <div class="urgent-banner">
      <div class="urgent-copy">
        <span class="urgent-icon" aria-hidden="true">!</span>
        <div>
          <p class="urgent-title">Need this urgently?</p>
          <p class="urgent-subtitle">Select Yes for same-day priority. We will do our best to schedule the earliest available time.</p>
        </div>
      </div>
      <div class="urgent-actions">
        <a href="?urgent=0" class="urgent-btn {% if urgent_selected %}is-ghost{% else %}is-active{% endif %}">No</a>
        <a href="?urgent=1" class="urgent-btn urgent-yes {% if urgent_selected %}is-active{% endif %}">Yes</a>
      </div>
    </div>

    <hr class="divider" />

<div class="services-list">

  {% for s in services %}
  <div class="service-card" data-title="{{ s.title|lower }}" data-desc="{{ s.description|default:''|lower }}">
    
    <img src="{{ s.image.url }}" alt="{{ s.title }}">

    <div class="service-content">
      <h2>{{ s.title }}</h2>

      <p>{{ s.description }}</p>

      {% if s.recommended %}
      <span class="recommended">{{ s.recommended }}</span>
      {% endif %}
    </div>

    <!-- زر بدء المسار -->
<a href="{% url 'home:business_start_booking' %}?service={{ s.title }}{% if urgent_selected %}&urgent=1{% endif %}" 
   class="quote-btn">
  Request Quote
</a>


  </div>
  {% endfor %}

</div>

  </main>

  <div class="filter-modal" id="filterModal" aria-hidden="true">
    <div class="filter-card" role="dialog" aria-modal="true" aria-labelledby="filterTitle">
      <div class="filter-head">
        <h3 id="filterTitle">Filter Services</h3>
        <button class="filter-close" id="filterClose" aria-label="Close">✕</button>
      </div>
      <input class="filter-input" id="filterInput" type="text" placeholder="Search by name or description">
      <div class="filter-actions">
        <button class="reset" id="filterReset">Reset</button>
        <button class="apply" id="filterApply">Apply</button>
      </div>
    </div>
  </div>
{% include "home/includes/footer.html" %}
  <script>
    const btn = document.getElementById("filter-btn");
    const modal = document.getElementById("filterModal");
    const closeBtn = document.getElementById("filterClose");
    const applyBtn = document.getElementById("filterApply");
    const resetBtn = document.getElementById("filterReset");
    const filterInput = document.getElementById("filterInput");
    const cards = document.querySelectorAll(".service-card");

    const openModal = () => {
      modal.classList.add("open");
      modal.setAttribute("aria-hidden", "false");
    };
    const closeModal = () => {
      modal.classList.remove("open");
      modal.setAttribute("aria-hidden", "true");
    };

    btn.addEventListener("click", openModal);
    closeBtn.addEventListener("click", closeModal);
    modal.addEventListener("click", (e) => {
      if (e.target === modal) closeModal();
    });

    resetBtn.addEventListener("click", () => {
      filterInput.value = "";
      cards.forEach((card) => card.style.display = "");
    });

    applyBtn.addEventListener("click", () => {
      const q = filterInput.value.trim().toLowerCase();
      cards.forEach((card) => {
        const title = card.dataset.title || "";
        const desc = card.dataset.desc || "";
        card.style.display = (title.includes(q) || desc.includes(q)) ? "" : "none";
      });
      closeModal();
    });
  </script>
<script src="{% static 'js/main_header.js' %}"></script>
</body>
</html>
