{% extends "admin/change_form.html" %}
{% load i18n admin_urls static %}

{% block content %}

  {% if not request.GET.edit %}
    <div style="
      margin-bottom:16px;
      padding:12px 16px;
      background:#fff3cd;
      border:1px solid #ffeeba;
      border-radius:6px;
    ">
      <a href="?edit=1"
         class="button"
         style="
           background:#f0ad4e;
           color:#000;
           padding:8px 14px;
           border-radius:4px;
           text-decoration:none;
           font-weight:600;
         ">
        ‚úèÔ∏è Enable Editing
      </a>
      <span style="margin-left:12px;color:#856404;">
        This booking is in read-only mode
      </span>
    </div>
  {% else %}
    <div style="
      margin-bottom:16px;
      padding:12px 16px;
      background:#e2f0ff;
      border:1px solid #b6d4fe;
      border-radius:6px;
    ">
      <a href="."
         class="button"
         style="
           background:#0d6efd;
           color:#fff;
           padding:8px 14px;
           border-radius:4px;
           text-decoration:none;
           font-weight:600;
         ">
        üîí Disable Editing
      </a>
      <span style="margin-left:12px;color:#084298;">
        Editing mode enabled
      </span>
    </div>
  {% endif %}

  {{ block.super }}

{% endblock %}


{% block submit_buttons_bottom %}

      {% if adminform.form.admin_points %}
      <div class="module aligned">
        <h2>‚≠ê Loyalty Points</h2>

        <div class="form-row">
          {{ adminform.form.admin_points.label_tag }}
          {{ adminform.form.admin_points }}
          {% if adminform.form.admin_points.help_text %}
            <p class="help">{{ adminform.form.admin_points.help_text }}</p>
          {% endif %}
        </div>
      </div>
      {% endif %}

  {% if request.GET.edit %}
    <div style="margin-top:20px; display:flex; gap:10px;">

      <input type="submit"
             value="üíæ Save"
             class="default"
             name="_save">

      {% if original and not original.is_refunded and original.status not in "COMPLETED,REFUNDED" %}
        <button type="submit"
                name="_cancel_booking"
                class="button"
                style="background:#dc3545;color:white;">
          ‚ùå Cancel Booking
        </button>
      {% endif %}

    </div>
  {% endif %}
{% endblock %}
