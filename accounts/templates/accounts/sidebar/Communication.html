{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Communication</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Vesper+Libre:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/Communication.css' %}">
  <link rel="stylesheet" href="{% static 'css/base.css' %}">
</head>

<body>

<!-- HEADER -->
<header class="main-header">
  <div class="logo">
    <img src="{% static 'images/logo.png' %}" alt="Logo">
  </div>

  <div class="menu-toggle" id="menu-toggle">☰</div>

  <nav class="nav-links" id="nav-links">
    <a href="{% url 'home:home' %}">HOME</a>
    <a href="{% url 'home:about' %}">ABOUT</a>
    <a href="#">SERVICES</a>
    <a href="#">PRICING</a>
    <a href="#">CONTACT</a>
  </nav>

  <div class="profile-btn">
    <a href="#">My Profile</a>
  </div>
</header>
<div class="layout">

    <!-- ===== Sidebar ===== -->
    <aside class="sidebar">
      <div class="profile-head">
        <div class="avatar"></div>
        <div>
          <div class="name">Sophia Bennett</div>
          <div class="id">ID: 123456</div>
        </div>
      </div>

      <form id="logout-form" method="post" action="{% url 'logout' %}" style="display: none;">
          {% csrf_token %}
      </form>

      <nav class="side-nav">
        <a href="{% url 'accounts:customer_profile_view' %}" class="nav-item active"><img src="{% static 'images/user-location0.png' %}" class="ico"><span>Overview</span></a>
        <a href="{% url 'accounts:Address_and_Locations_view' %}" class="nav-item"><img src="{% static 'images/user-location1.png' %}" class="ico"><span>Address & Locations</span></a>
        <a href="{% url 'accounts:my_bookimg' %}" class="nav-item"><img src="{% static 'images/event-accepted0.png'%}" class="ico"><span>My Bookings</span></a>
        <a href="{% url 'accounts:incident' %}" class="nav-item"><img src="{% static 'images/user-location1.png'%}" class="ico"><span>Incidents</span></a>
        <a href="{% url 'accounts:Service_Preferences' %}" class="nav-item"><img src="{% static 'images/settings0.png'%}" class="ico"><span>Service Preferences</span></a>
        <a href="{% url 'accounts:Communication' %}" class="nav-item" ><img src="{% static 'images/communication0.png'%}" class="ico"><span>Communication</span></a>
        <a href="{% url 'accounts:Customer_Notes' %}" class="nav-item" ><img src="{% static 'images/list-view0.png'%}" class="ico"><span>Customer Notes</span></a>
        <a href="{% url 'accounts:Payment_and_Billing' %}" class="nav-item"><img src="{% static 'images/magnetic-card0.png'%}" class="ico"><span>Payment & Billing</span></a>
        <a href="{% url 'accounts:Change_Password' %}" class="nav-item"><img src="{% static 'images/person1.png'%}" class="ico"><span>Change Password</span></a>
        <a href="{% url 'accounts:Service_History_and_Ratings' %}" class="nav-item"><img src="{% static 'images/vector2.svg'%}" class="ico"><span>Service History & Ratings</span></a>
        <a href="{% url 'accounts:Loyalty_and_Rewards' %}" class="nav-item"><img src="{% static 'images/prize0.png'%}" class="ico"><span>Loyalty & Rewards</span></a>
        <a href="#" class="nav-item" onclick="event.preventDefault(); document.getElementById('logout-form').submit();"><img src="{% static 'images/logout-rounded0.png' %}" class="ico"><span>Logout</span></a>
      </nav>
    </aside>  <!-- نفس السايدبار تبعك بدون تعديل -->


  <!-- MAIN -->
  <main class="content">
    <h1 class="page-title">Communication</h1>

    <form method="post" class="card">
      {% csrf_token %}

      <h2 class="section-title">Notifications</h2>

      <!-- Service Reminders -->
      <div class="section">
        <h3>Receive Service Reminders</h3>
        <p>Includes appointment reminders and schedule updates.</p>
        <label class="switch">
          <input type="checkbox" name="service_reminders" {% if pref.service_reminders %}checked{% endif %}>
          <span class="slider"></span>
        </label>
      </div>

      <!-- Promotions -->
      <div class="section">
        <h3>Receive Promotions & Offers</h3>
        <p>Includes discounts and special offers.</p>
        <label class="switch">
          <input type="checkbox" name="promotions" {% if pref.promotions %}checked{% endif %}>
          <span class="slider"></span>
        </label>
      </div>

      <!-- Frequency -->
      <input type="hidden" name="frequency" id="frequencyInput" value="{{ pref.frequency }}">

      <div class="frequency-section">
        <button type="button" data-value="weekly" class="frequency-btn {% if pref.frequency == 'weekly' %}active{% endif %}">Weekly</button>
        <button type="button" data-value="monthly" class="frequency-btn {% if pref.frequency == 'monthly' %}active{% endif %}">Monthly</button>
        <button type="button" data-value="never" class="frequency-btn {% if pref.frequency == 'never' %}active{% endif %}">Never</button>
      </div>

      <!-- Methods -->
      <div class="section">
        <h3>Preferred communication method</h3>
        <div class="checkboxes">
          <label><input type="checkbox" name="email" {% if pref.email %}checked{% endif %}> Email</label>
          <label><input type="checkbox" name="sms" {% if pref.sms %}checked{% endif %}> SMS</label>
          <label><input type="checkbox" name="phone" {% if pref.phone %}checked{% endif %}> Phone</label>
          <label><input type="checkbox" name="push" {% if pref.push %}checked{% endif %}> Push</label>
          <label><input type="checkbox" name="in_app" {% if pref.in_app %}checked{% endif %}> In-App</label>
        </div>
      </div>

      <!-- Language -->
      <div class="section">
        <h3>Language Preference</h3>
        <div class="language-fields column">
          <div>
            <label>Language</label>
            <select name="language">
              <option {% if pref.language == "English" %}selected{% endif %}>English</option>
              <option {% if pref.language == "Arabic" %}selected{% endif %}>Arabic</option>
              <option {% if pref.language == "Swedish" %}selected{% endif %}>Swedish</option>
            </select>
          </div>

          <div>
            <label>Alternative option</label>
            <select name="secondary_language">
              <option value="">---</option>
              <option {% if pref.secondary_language == "English" %}selected{% endif %}>English</option>
              <option {% if pref.secondary_language == "Swedish" %}selected{% endif %}>Swedish</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Timing -->
      <input type="hidden" name="timing" id="timingInput" value="{{ pref.timing }}">

      <div class="section">
        <h3>Notification Timing</h3>
        <div class="time-options">
          <button type="button" data-value="morning" class="{% if pref.timing == 'morning' %}active{% endif %}">Morning</button>
          <button type="button" data-value="afternoon" class="{% if pref.timing == 'afternoon' %}active{% endif %}">Afternoon</button>
          <button type="button" data-value="evening" class="{% if pref.timing == 'evening' %}active{% endif %}">Evening</button>
          <button type="button" data-value="any" class="{% if pref.timing == 'any' %}active{% endif %}">Any Time</button>
        </div>
      </div>

      <!-- ACTIONS -->
      <div class="actions">
        <button type="submit" class="btn primary">Save Changes</button>
        <a href="{% url 'accounts:customer_profile_view' %}" class="btn outline">Cancel</a>
      </div>

      <p class="update-text">
        You can update your preferences anytime.
        <span class="red">Last updated: {{ pref.updated_at|date:"M d, Y" }}</span>
      </p>

    </form>
  </main>
</div>
<footer class="footer">
  <div class="footer-container">
    <!-- العمود 1: اللوجو والنص -->
    <div class="footer-col about">
      <img src="{% static 'images/logo.png' %}" alt="Hembla Logo" class="footer-logo">
      <p>
        At Hembla, we believe home should be your haven, not your to-do list. 
        From cleaning to care, we’re here to make life easier, one home at a time.
      </p>

      <!-- الصف الإضافي تحت النص -->
      <div class="bottom-left">
        <!-- Connect -->
        <div class="connect">
          <h4>Connect</h4>
          <div class="socials">
            <img src="{% static 'images/facebook0.png'%}" alt="facebook">
            <img src="{% static 'images/instagram-circle0.png'%}" alt="instagram">
            <img src="{% static 'images/linked-in-circled0.png'%}" alt="linkedin">
            <img src="{% static 'images/whats-app0.png'%}" alt="whatsapp">
          </div>
        </div>


      </div>
    </div>

    <!-- العمود 2: Support -->
    <div class="footer-col support">
      <h4>Support</h4>
      <ul>
        <li><a href="#">Contact Us</a></li>
        <li><a href="#">Address</a></li>
        <li><a href="#">Working Hours</a></li>
        <li><a href="#">FAQ</a></li>
      </ul>
              <!-- App Download -->
        <div class="app-download">
          <h4>App Download</h4>
          <div class="apps">
            <img src="{% static 'images/mobile0.png'%}" alt="mobile">
            <img src="{% static 'images/chat-gpt-image-sep-15-2025-05-50-28-pm-10.png'%}" alt="app store">
          </div>
        </div>
    </div>

    <!-- العمود 3: Company -->
    <div class="footer-col company">
      <h4>Company</h4>
      <ul>
        <li><a href="#">About Us</a></li>
        <li><a href="#">Careers</a></li>
        <li><a href="#">Our Story</a></li>
        <li><a href="#">Feedback</a></li>
      </ul>
    </div>

    <!-- العمود 4: Legal / Privacy -->
    <div class="footer-col legal">
      <h4>Legal/Privacy</h4>
      <ul>
        <li><a href="#">Privacy Policy</a></li>
        <li><a href="#">Terms & Conditions</a></li>
        <li><a href="#">Cookie Policy</a></li>
        <li><a href="#">Accessibility Statement</a></li>
      </ul>
    </div>
  </div>

  <!-- الخط الفاصل -->
  <hr class="footer-line">

  <!-- الصف السفلي -->
  <div class="footer-bottom">
    <div class="language-box">
      <img src="{% static 'images/earth-globe0.png'%}" alt="earth" class="earth-icon">
      <span>Language</span>
    </div>
    <p>© 2025 Hembla Cleaning Services. All rights reserved.</p>
  </div>
</footer>
<!-- JS -->
<script>
function bindButtons(selector, inputId){
  const buttons = document.querySelectorAll(selector);
  const input = document.getElementById(inputId);

  buttons.forEach(btn=>{
    btn.addEventListener("click", ()=>{
      buttons.forEach(b=>b.classList.remove("active"));
      btn.classList.add("active");
      input.value = btn.dataset.value;
    });
  });
}

bindButtons(".frequency-btn", "frequencyInput");
bindButtons(".time-options button", "timingInput");
</script>

</body>
</html>
