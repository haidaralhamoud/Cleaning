{% load static %}
{% load bootstrap4 %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Customer Profile - Address & Locations</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Vesper+Libre:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/Address_and_Locations_view.css' %}" />
  <link rel="stylesheet" href="{% static 'css/base.css' %}">

</head>
<body>
<!-- HEADER -->
<header class="main-header">
  <div class="logo">
    <img src="{% static 'images/logo.png' %}" alt="Logo">
  </div>

  <div class="menu-toggle" id="menu-toggle">â˜°</div>

  <nav class="nav-links" id="nav-links">
    <a href="{% url 'home:home' %}">HOME</a>
    <a href="{% url 'home:about' %}">ABOUT</a>
    <a href="#">SERVICES</a>
    <a href="#">PRICING</a>
    <a href="#">CONTACT</a>
  </nav>

  <div class="profile-btn">
    <a href="#">My Profile</a>
  </div>
</header>

   <div class="layout"> 
    <!-- Sidebar -->
     <!-- Ø²Ø± Ø§Ù„Ù…ÙŠÙ†ÙŠÙˆ ÙŠØ¸Ù‡Ø± ÙÙ‚Ø· Ø¨Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ -->
<div class="mobile-header">
  <button class="menu-toggle floating" id="menuToggle">
    <span class="arrow">&#8250;</span> <!-- â€º -->
  </button>
  <h2 class="mobile-title">Customer Profile</h2>
</div>



    <aside class="sidebar">
      <div class="profile-head">
        <div class="avatar"></div>
        <div>
          <div class="name">Sophia Bennett</div>
          <div class="id">ID: 123456</div>
        </div>
      </div>

      <form id="logout-form" method="post" action="{% url 'logout' %}" style="display: none;">
          {% csrf_token %}
      </form>

      <nav class="side-nav">
        <a href="{% url 'accounts:customer_profile_view' %}" class="nav-item active"><img src="{% static 'images/user-location0.png' %}" class="ico"><span>Overview</span></a>
        <a href="{% url 'accounts:Address_and_Locations_view' %}" class="nav-item"><img src="{% static 'images/user-location1.png' %}" class="ico"><span>Address & Locations</span></a>
        <a href="{% url 'accounts:my_bookimg' %}" class="nav-item"><img src="{% static 'images/event-accepted0.png'%}" class="ico"><span>My Bookings</span></a>
        <a href="{% url 'accounts:incident' %}" class="nav-item"><img src="{% static 'images/user-location1.png'%}" class="ico"><span>Incidents</span></a>
        <a href="{% url 'accounts:Service_Preferences' %}" class="nav-item"><img src="{% static 'images/settings0.png'%}" class="ico"><span>Service Preferences</span></a>
        <a href="{% url 'accounts:Communication' %}" class="nav-item" ><img src="{% static 'images/communication0.png'%}" class="ico"><span>Communication</span></a>
        <a href="{% url 'accounts:Customer_Notes' %}" class="nav-item" ><img src="{% static 'images/list-view0.png'%}" class="ico"><span>Customer Notes</span></a>
        <a href="{% url 'accounts:Payment_and_Billing' %}" class="nav-item"><img src="{% static 'images/magnetic-card0.png'%}" class="ico"><span>Payment & Billing</span></a>
        <a href="{% url 'accounts:Change_Password' %}" class="nav-item"><img src="{% static 'images/person1.png'%}" class="ico"><span>Change Password</span></a>
        <a href="{% url 'accounts:Service_History_and_Ratings' %}" class="nav-item"><img src="{% static 'images/vector2.svg'%}" class="ico"><span>Service History & Ratings</span></a>
        <a href="{% url 'accounts:Loyalty_and_Rewards' %}" class="nav-item"><img src="{% static 'images/prize0.png'%}" class="ico"><span>Loyalty & Rewards</span></a>
        <a href="#" class="nav-item" onclick="event.preventDefault(); document.getElementById('logout-form').submit();"><img src="{% static 'images/logout-rounded0.png' %}" class="ico"><span>Logout</span></a>
      </nav>
    </aside>

    <!-- Main content -->
    <main class="main">
      <h1>Address & Locations</h1>
      <h2>My addresses</h2>

      <div class="card">
        <div class="left">
          <img src="{% static 'images/home2.png'%}" class="icon">
          <h3>Home <img src="{% static 'images/star0.png'%}" class="star"> <span class="badge">Active</span></h3>
          <p>ğŸ“ 123 Maple Street, Apartment 4B, Anytown, CA 91234</p>
          <p>ğŸ“… Next service: Aug 20, 2025, 10:00 AM</p>
          <p>â˜ Layal Hassan Â· +1 555-123-4567</p>
          <p>ğŸ…¿ Guest spot #5 Â· ğŸ”‘ Gate 3, code 1234#</p>
        </div>
        <div class="right">
          <button class="btn btn-default">Set as default</button>
          <button class="btn btn-gray">View on Map</button>
          <button class="btn btn-gray">Edit</button>
          <button class="btn btn-gray">Remove</button>
        </div>
      </div>

{% for location in locations %}
<div class="card">

  <div class="left">
    <img src="{% static 'images/home2.png'%}" class="icon">

    <h3>
      {{ location.get_address_type_display }}

      {% if location.is_primary %}
        <img src="{% static 'images/star0.png'%}" class="star">
        <span class="badge">Active</span>
      {% endif %}
    </h3>

    <p>
      ğŸ“ {{ location.street_address }},
      {{ location.city }},
      {{ location.region }},
      {{ location.postal_code }},
      {{ location.country }}
    </p>

    {% if location.contact_name %}
      <p>â˜ {{ location.contact_name }} Â· {{ location.contact_phone }}</p>
    {% endif %}

    {% if location.parking_notes or location.entry_code %}
      <p>
        ğŸ…¿ {{ location.parking_notes|default:"â€”" }}
        Â· ğŸ”‘ {{ location.entry_code|default:"â€”" }}
      </p>
    {% endif %}
  </div>

  <div class="right">
    {% if not location.is_primary %}
      <a href="{% url 'accounts:set_location_primary' location.id %}"
         class="btn btn-default">
        Set as default
      </a>
    {% endif %}

    <a href="#" class="btn btn-gray"><button class="btn btn-gray">View on Map</button></a>

    <a href="{% url 'accounts:edit_address_and_locations' location.id %}"
       class="btn btn-gray"><button class="btn btn-gray">Edit</button></a>

    <a href="{% url 'accounts:delete_location' location.id %}"
       class="btn btn-gray"
       onclick="return confirm('Delete this location?')"><button class="btn btn-gray" >
      Remove</button>
    </a>
  </div>

</div>
{% empty %}
<p style="text-align:center; color:#777">
  No addresses added yet.
</p>
{% endfor %}


      <button  class="btn btn-add"><a href="{% url 'accounts:Add_Address_and_Locations' %}"  class="nav-item">Add Location</a></button>
    </main>
  </div>

<script>
  const toggle = document.getElementById("menuToggle");
  const sidebar = document.querySelector(".sidebar");
  const arrow = document.querySelector(".menu-toggle .arrow");

  toggle.addEventListener("click", () => {
    sidebar.classList.toggle("open");
    // Ù„Ù…Ø§ ØªÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³Ù‡Ù… ÙŠÙ†Ø¹ÙƒØ³
    if (sidebar.classList.contains("open")) {
      arrow.innerHTML = "&#8249;"; // â€¹ Ø³Ù‡Ù… Ù„Ù„ÙŠØ³Ø§Ø±
    } else {
      arrow.innerHTML = "&#8250;"; // â€º Ø³Ù‡Ù… Ù„Ù„ÙŠÙ…ÙŠÙ†
    }
  });
</script>



</body>
</html>
