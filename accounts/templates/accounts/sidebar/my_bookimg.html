{% load static %}
{% load bootstrap4 %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Bookings - Hembla</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Vesper+Libre:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/my_bookimg.css' %}" />
  <link rel="stylesheet" href="{% static 'css/base.css' %}">
  <style>
    /* ===== Status Tags ===== */

.dots {
  background: none;
  border: none;
  font-size: 18px;
  cursor: pointer;
}
.menu-wrap {
  position: relative;
}

.dropdown {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 6px;
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 12px 30px rgba(0,0,0,0.2);
  min-width: 190px;
  z-index: 9999; /* ğŸ”¥ Ù…Ù‡Ù… */
}

.menu-wrap.show .dropdown {
  display: block;
}

.dropdown a {
  display: block;
  padding: 10px 14px;
  font-size: 14px;
  text-decoration: none;
  color: #333;
}

.dropdown a:hover {
  background: #f5f5f5;
}

/* Cancel danger */
.action-cancel {
  color: #d32f2f;
}

.action-cancel:hover {
  background: #fdecea;
}
.table-container {
  overflow: visible !important;
}
.tables {
  overflow: visible !important;
}
.service-link {
  color: #1a73e8;
  font-weight: 600;
  text-decoration: none;
}

.service-link:hover {
  text-decoration: underline;
}
/* ===== STATUS TAGS (PILL STYLE) ===== */
.status {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 110px;
  padding: 8px 18px;
  border-radius: 999px; /* pill */
  font-size: 14px;
  font-weight: 600;
  text-align: center;
}

/* Scheduled / Upcoming (Ø£Ø®Ø¶Ø± Ù†Ø§Ø¹Ù…) */
.status-upcoming {
  background-color: #bfe1a8;   /* Ù†ÙØ³ Ø§Ù„Ø£Ø®Ø¶Ø± Ø¨Ø§Ù„ØµÙˆØ±Ø© */
  color: #5b8f2b;
}

/* Ongoing (Ø¥Ø°Ø§ Ø¨Ø¯Ùƒ ØªÙ…ÙŠÙ‘Ø²Ù‡ â€“ Ø§Ø®ØªÙŠØ§Ø±ÙŠ) */
.status-ongoing {
  background-color: #ffe0b2;
  color: #ef6c00;
}

/* Completed (Ø£Ø²Ø±Ù‚ Ø³Ù…Ø§ÙˆÙŠ) */
.status-completed {
  background-color: #7dd3e8;   /* Ø£Ø²Ø±Ù‚ Ù…Ø«Ù„ Ø§Ù„ØµÙˆØ±Ø© */
  color: #007c91;
}

/* Cancelled (Ø£Ø­Ù…Ø± Ù‡Ø§Ø¯Ø¦ â€“ Ù…Ùˆ ÙØ§Ù‚Ø¹) */
.status-cancelled {
  background-color: #f6c1c1;
  color: #b71c1c;
}

  </style>
</head>
<body>
<!-- HEADER -->
<header class="main-header">
  <div class="logo">
    <img src="{% static 'images/logo.png' %}" alt="Logo">
  </div>

  <div class="menu-toggle" id="menu-toggle">â˜°</div>

  <nav class="nav-links" id="nav-links">
    <a href="{% url 'home:home' %}">HOME</a>
    <a href="{% url 'home:about' %}">ABOUT</a>
    <a href="#">SERVICES</a>
    <a href="#">PRICING</a>
    <a href="#">CONTACT</a>
  </nav>

  <div class="profile-btn">
    <a href="#">My Profile</a>
  </div>
</header>

  <div class="page">

    <!-- ===== Mobile Header ===== -->
    <div class="mobile-header">
<!-- Floating Menu Button -->
<button class="menu-toggle inside-btn" id="menuToggle">
  <span class="arrow">&#8250;</span>
</button>

 
    </div>

    <!-- ===== Sidebar ===== -->
    <aside class="sidebar">
      <div class="profile-head">
        <div class="avatar"></div>
        <div>
          <div class="name">Sophia Bennett</div>
          <div class="id">ID: 123456</div>
        </div>
      </div>

      <form id="logout-form" method="post" action="{% url 'logout' %}" style="display: none;">
          {% csrf_token %}
      </form>

      <nav class="side-nav">
        <a href="{% url 'accounts:customer_profile_view' %}" class="nav-item active"><img src="{% static 'images/user-location0.png' %}" class="ico"><span>Overview</span></a>
        <a href="{% url 'accounts:Address_and_Locations_view' %}" class="nav-item"><img src="{% static 'images/user-location1.png' %}" class="ico"><span>Address & Locations</span></a>
        <a href="{% url 'accounts:my_bookimg' %}" class="nav-item"><img src="{% static 'images/event-accepted0.png'%}" class="ico"><span>My Bookings</span></a>
        <a href="{% url 'accounts:incident' %}" class="nav-item"><img src="{% static 'images/user-location1.png'%}" class="ico"><span>Incidents</span></a>
        <a href="{% url 'accounts:Service_Preferences' %}" class="nav-item"><img src="{% static 'images/settings0.png'%}" class="ico"><span>Service Preferences</span></a>
        <a href="{% url 'accounts:Communication' %}" class="nav-item" ><img src="{% static 'images/communication0.png'%}" class="ico"><span>Communication</span></a>
        <a href="{% url 'accounts:Customer_Notes' %}" class="nav-item" ><img src="{% static 'images/list-view0.png'%}" class="ico"><span>Customer Notes</span></a>
        <a href="{% url 'accounts:Payment_and_Billing' %}" class="nav-item"><img src="{% static 'images/magnetic-card0.png'%}" class="ico"><span>Payment & Billing</span></a>
        <a href="{% url 'accounts:Change_Password' %}" class="nav-item"><img src="{% static 'images/person1.png'%}" class="ico"><span>Change Password</span></a>
        <a href="{% url 'accounts:Service_History_and_Ratings' %}" class="nav-item"><img src="{% static 'images/vector2.svg'%}" class="ico"><span>Service History & Ratings</span></a>
        <a href="{% url 'accounts:Loyalty_and_Rewards' %}" class="nav-item"><img src="{% static 'images/prize0.png'%}" class="ico"><span>Loyalty & Rewards</span></a>
        <a href="#" class="nav-item" onclick="event.preventDefault(); document.getElementById('logout-form').submit();"><img src="{% static 'images/logout-rounded0.png' %}" class="ico"><span>Logout</span></a>
      </nav>
    </aside>

    <!-- ===== Main Content ===== -->
    <main class="main">
      <h1 class="page-title">My Bookings</h1>
      <p class="subtitle">Your bookings, your history, your peace of mind</p>

      <!-- Tabs -->
      <div class="tabs">
        <button class="tab active" data-target="all">All</button>
        <button class="tab" data-target="upcoming">Upcoming</button>
        <button class="tab" data-target="ongoing">Ongoing</button>
        <button class="tab" data-target="completed">Completed</button>
        <button class="tab" data-target="cancelled">Cancelled</button>
      </div>

      <!-- Tables -->
      <div class="tables">
        <!-- All -->
        <div class="table-container active" id="all">
          <table>
            <thead>
              <tr>
                <th>Order ID</th>
                <th>Customer Name</th>
                <th>Service Type</th>
                <th>Date</th>
                <th>Location</th>
                <th>Status</th>
                <th>View</th>
              </tr>
            </thead>
<tbody>
{% for b in bookings %}
<tr data-status="{{ b.status|lower }}">
  <td>#{{ b.id }}</td>
  <td>{{ b.customer_name }}</td>
 <td>
<a href="{% url 'accounts:view_service_details' b.type|lower b.id %}">
    {{ b.service }}
  </a>
  <br>
  <small style="opacity:.6;">({{ b.type }})</small>
</td>
  <td>{{ b.date|date:"F d, Y" }}</td>
  <td>{{ b.location }}</td>
  <td>
    <span class="status status-{{ b.status|lower }}">
  {% if b.status == "upcoming" %}
    Scheduled
  {% else %}
    {{ b.status|title }}
  {% endif %}
</span>

  </td>
<td>
  <div class="menu-wrap">
    <button class="dots">â€¢â€¢â€¢</button>

    <div class="dropdown">

  {# ÙÙ‚Ø· Ø¥Ø°Ø§ Ø§Ù„Ø­Ø¬Ø² Ù…Ùˆ Ù…ÙƒØªÙ…Ù„ ÙˆÙ„Ø§ Ù…Ù„ØºÙŠ #}
  {% if b.status not in "completed cancelled" %}
    <a href="#" class="action-reschedule">Reschedule</a>
    <a href="#" class="action-cancel">Cancel</a>
  {% endif %}

  <a href="#" class="action-invoice">Download invoice</a>
  <a href="#" class="action-add">Add service</a>

</div>

  </div>
</td>

</tr>
{% empty %}
<tr>
  <td colspan="7" style="text-align:center;">
    No bookings yet
  </td>
</tr>
{% endfor %}
<tr id="no-results" style="display:none;">
  <td colspan="7" style="text-align:center; padding:20px; opacity:.6;">
    No bookings found
  </td>
</tr>
</tbody>

          </table>
        </div>
      </div>
    </main>
  </div>

  <div class="overlay" id="overlay"></div>
<footer class="footer">
  <div class="footer-container">
    <!-- Ø§Ù„Ø¹Ù…ÙˆØ¯ 1: Ø§Ù„Ù„ÙˆØ¬Ùˆ ÙˆØ§Ù„Ù†Øµ -->
    <div class="footer-col about">
      <img src="{% static 'images/logo.png' %}" alt="Hembla Logo" class="footer-logo">
      <p>
        At Hembla, we believe home should be your haven, not your to-do list. 
        From cleaning to care, weâ€™re here to make life easier, one home at a time.
      </p>

      <!-- Ø§Ù„ØµÙ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠ ØªØ­Øª Ø§Ù„Ù†Øµ -->
      <div class="bottom-left">
        <!-- Connect -->
        <div class="connect">
          <h4>Connect</h4>
          <div class="socials">
            <img src="{% static 'images/facebook0.png'%}" alt="facebook">
            <img src="{% static 'images/instagram-circle0.png'%}" alt="instagram">
            <img src="{% static 'images/linked-in-circled0.png'%}" alt="linkedin">
            <img src="{% static 'images/whats-app0.png'%}" alt="whatsapp">
          </div>
        </div>


      </div>
    </div>

    <!-- Ø§Ù„Ø¹Ù…ÙˆØ¯ 2: Support -->
    <div class="footer-col support">
      <h4>Support</h4>
      <ul>
        <li><a href="#">Contact Us</a></li>
        <li><a href="#">Address</a></li>
        <li><a href="#">Working Hours</a></li>
        <li><a href="#">FAQ</a></li>
      </ul>
              <!-- App Download -->
        <div class="app-download">
          <h4>App Download</h4>
          <div class="apps">
            <img src="{% static 'images/mobile0.png'%}" alt="mobile">
            <img src="{% static 'images/chat-gpt-image-sep-15-2025-05-50-28-pm-10.png'%}" alt="app store">
          </div>
        </div>
    </div>

    <!-- Ø§Ù„Ø¹Ù…ÙˆØ¯ 3: Company -->
    <div class="footer-col company">
      <h4>Company</h4>
      <ul>
        <li><a href="#">About Us</a></li>
        <li><a href="#">Careers</a></li>
        <li><a href="#">Our Story</a></li>
        <li><a href="#">Feedback</a></li>
      </ul>
    </div>

    <!-- Ø§Ù„Ø¹Ù…ÙˆØ¯ 4: Legal / Privacy -->
    <div class="footer-col legal">
      <h4>Legal/Privacy</h4>
      <ul>
        <li><a href="#">Privacy Policy</a></li>
        <li><a href="#">Terms & Conditions</a></li>
        <li><a href="#">Cookie Policy</a></li>
        <li><a href="#">Accessibility Statement</a></li>
      </ul>
    </div>
  </div>

  <!-- Ø§Ù„Ø®Ø· Ø§Ù„ÙØ§ØµÙ„ -->
  <hr class="footer-line">

  <!-- Ø§Ù„ØµÙ Ø§Ù„Ø³ÙÙ„ÙŠ -->
  <div class="footer-bottom">
    <div class="language-box">
      <img src="{% static 'images/earth-globe0.png'%}" alt="earth" class="earth-icon">
      <span>Language</span>
    </div>
    <p>Â© 2025 Hembla Cleaning Services. All rights reserved.</p>
  </div>
</footer>

<script>
const toggleBtn = document.getElementById("menu-toggle");
const navLinks = document.getElementById("nav-links");
  
toggleBtn.addEventListener("click", () => {
  navLinks.classList.toggle("active");
});
</script>

  <script src="script.js">
    // Sidebar toggle
const toggle = document.getElementById("menuToggle");
const sidebar = document.querySelector(".sidebar");
const arrow = toggle.querySelector(".arrow");

toggle.addEventListener("click", () => {
  sidebar.classList.toggle("open");
  arrow.innerHTML = sidebar.classList.contains("open") ? "&#8249;" : "&#8250;";
});



// Dots dropdown
document.querySelectorAll(".dots").forEach(btn => {
  btn.addEventListener("click", e => {
    e.stopPropagation();
    document.querySelectorAll(".menu-wrap").forEach(m => m.classList.remove("show"));
    btn.closest(".menu-wrap").classList.toggle("show");
  });
});

document.addEventListener("click", () => {
  document.querySelectorAll(".menu-wrap").forEach(m => m.classList.remove("show"));
});

  toggle.addEventListener("click", () => {
    sidebar.classList.toggle("open");
    toggle.classList.toggle("rot");
  });

  const tabs = document.querySelectorAll(".tab");

tabs.forEach(tab => {
  tab.addEventListener("click", () => {
    const target = tab.dataset.target;

    document.querySelectorAll("tbody tr").forEach(row => {
      if (target === "all" || row.dataset.status === target) {
        row.style.display = "";
      } else {
        row.style.display = "none";
      }
    });

    tabs.forEach(t => t.classList.remove("active"));
    tab.classList.add("active");
  });
});
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const tabs = document.querySelectorAll(".tab");
  const rows = document.querySelectorAll("tbody tr[data-status]");
  const noResults = document.getElementById("no-results");

  function filterRows(target) {
    let visibleCount = 0;

    rows.forEach(row => {
      const status = row.dataset.status;

      if (target === "all" || status === target) {
        row.style.display = "";
        visibleCount++;
      } else {
        row.style.display = "none";
      }
    });

    // Ø¥Ø°Ø§ Ù…Ø§ ÙÙŠ ÙˆÙ„Ø§ ØµÙ Ø¸Ø§Ù‡Ø±
    if (visibleCount === 0) {
      noResults.style.display = "";
    } else {
      noResults.style.display = "none";
    }
  }

  tabs.forEach(tab => {
    tab.addEventListener("click", () => {
      const target = tab.dataset.target;

      tabs.forEach(t => t.classList.remove("active"));
      tab.classList.add("active");

      filterRows(target);
    });
  });

  // ØªØ´ØºÙŠÙ„ Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø¹Ù„Ù‰ All
  filterRows("all");
});

document.querySelectorAll(".dots").forEach(btn => {
  btn.addEventListener("click", e => {
    e.stopPropagation();
    document.querySelectorAll(".menu-wrap").forEach(m => m.classList.remove("show"));
    btn.closest(".menu-wrap").classList.toggle("show");
  });
});

document.addEventListener("click", () => {
  document.querySelectorAll(".menu-wrap").forEach(m => m.classList.remove("show"));
});

</script>

 
</body>
</html>
